# 数据结构可视化模拟器使用说明

## 1. 简介

数据结构可视化模拟器是一个基于Python和PyQt5的教学工具，用于直观展示常见数据结构的操作和算法执行过程。本软件支持线性结构（顺序表、链表、栈）和树形结构（二叉树、二叉搜索树、哈夫曼树）的可视化展示。

### 1.1 最新更新

- **哈夫曼树频率数据保存修复**：修复了哈夫曼树保存时频率数据丢失的问题，现在保存和加载哈夫曼树时能正确保留原始权重信息
- **树结构加载页面切换修复**：修复了加载树结构数据时不会自动切换到对应数据结构页面的问题
- **BST层序遍历功能**：为二叉搜索树添加了层序遍历功能，支持完整的树结构保存

## 2. 安装与运行

### 2.1 环境要求

- Python 3.6+
- PyQt5 5.15+
- 其他依赖项（见requirements.txt）

### 2.2 安装步骤

1. 克隆或下载项目代码
2. 安装依赖项：
   ```
   pip install -r requirements.txt
   ```
3. 运行程序：
   ```
   python main.py
   ```

## 3. 功能介绍

### 3.1 通用功能

#### 3.1.1 保存和加载数据结构

- **保存数据结构**：在创建并操作数据结构后，可以通过以下方式保存当前数据结构：
  - 点击菜单栏中的"文件" -> "保存"
  - 使用快捷键 Ctrl+S
  - 在弹出的文件对话框中选择保存位置和文件名（默认扩展名为.dsv）

- **加载数据结构**：可以加载之前保存的数据结构文件：
  - 点击菜单栏中的"文件" -> "加载"
  - 使用快捷键 Ctrl+O
  - 在弹出的文件对话框中选择要加载的.dsv文件

注意：保存的文件包含当前数据结构的所有信息，加载后可以继续进行编辑和操作。

### 3.2 线性结构操作

#### 3.2.1 顺序表

- **创建顺序表**：选择"顺序表"，在"值"输入框中输入初始值（如"1,2,3,4,5"），点击"新建"按钮
- **插入元素**：在"值"输入框中输入要插入的值，在"位置"输入框中输入插入位置，点击"插入"按钮
- **删除元素**：在"位置"输入框中输入要删除的元素位置，点击"删除"按钮
- **获取元素**：在"位置"输入框中输入要获取的元素位置，点击"获取"按钮

#### 3.2.2 链表

- **创建链表**：选择"链表"，在"值"输入框中输入初始值（如"1,2,3,4,5"），点击"新建"按钮
- **插入元素**：在"值"输入框中输入要插入的值，在"位置"输入框中输入插入位置，点击"插入"按钮
- **删除元素**：在"位置"输入框中输入要删除的元素位置，点击"删除"按钮
- **获取元素**：在"位置"输入框中输入要获取的元素位置，点击"获取"按钮

#### 3.2.3 栈

- **创建栈**：选择"栈"，在"值"输入框中输入初始值（如"1,2,3,4,5"），点击"新建"按钮
- **入栈**：在"值"输入框中输入要入栈的值，点击"入栈"按钮
- **出栈**：点击"出栈"按钮
- **查看栈顶**：点击"查看栈顶"按钮

### 3.3 树形结构操作

#### 3.2.1 二叉树

- **创建二叉树**：选择"二叉树"，在"值"输入框中输入初始值（如"1,2,3,4,5"），点击"新建"按钮
- **插入节点**：在"值"输入框中输入要插入的值，点击"插入"按钮
- **删除节点**：在"值"输入框中输入要删除的值，点击"删除"按钮
- **遍历**：选择遍历方式（前序、中序、后序、层序），点击"遍历"按钮
- **遍历动画**：遍历操作会以动画方式展示遍历过程，可以使用"上一步"和"下一步"按钮控制动画播放

#### 3.2.2 二叉搜索树

- **创建BST**：选择"二叉搜索树"，在"值"输入框中输入初始值（如"10,5,15,3,7"），点击"新建"按钮
- **插入节点**：在"值"输入框中输入要插入的值，点击"插入"按钮
- **删除节点**：在"值"输入框中输入要删除的值，点击"删除"按钮
- **搜索节点**：在"值"输入框中输入要搜索的值，点击"搜索"按钮
- **搜索动画**：搜索操作会以动画方式展示搜索过程，可以使用"上一步"和"下一步"按钮控制动画播放

#### 3.2.3 哈夫曼树

- **创建哈夫曼树**：选择"哈夫曼树"，在"值"输入框中输入字符频率数据（格式：`字符1:频率1,字符2:频率2,...`，如 `A:5,B:9,C:12,D:13`），点击"新建"按钮
- **编码**：在编码输入框中输入要编码的文本，点击"编码"按钮
- **解码**：在解码输入框中输入要解码的二进制码，点击"解码"按钮

##### 哈夫曼树构建动画

哈夫曼树模式下提供了构建过程的可视化动画功能，可以逐步展示哈夫曼树的构建过程：

1. **启动动画**：创建哈夫曼树后，动画会自动开始播放，展示每一步的构建过程
2. **动画控制**：
   - 使用"上一步"和"下一步"按钮控制动画的播放
   - 可以暂停动画并手动查看每一步的构建过程
3. **动画内容**：
   - **初始状态**：显示所有字符节点按频率排序
   - **合并过程**：逐步合并频率最小的两个节点
   - **最终结果**：完整的哈夫曼树结构

##### 示例数据

以下是一些可用于测试哈夫曼树的示例数据：

- **简单字符集**：`A:5,B:9,C:12,D:13,E:16,F:45`
- **英文字母频率**：`E:12,T:9,A:8,O:7,I:7,N:6,S:6,H:6,R:6`
- **中文字符**：`的:15,一:12,是:10,在:8,不:7,了:6,有:5`

### 3.3 DSL命令

本软件支持使用简单的领域特定语言(DSL)来操作数据结构。在主窗口底部的命令输入框中，可以输入以下格式的命令：

#### 3.3.1 线性结构DSL命令

```
linear.<structure_type>.<operation> [params]
```

例如：
- `linear.array_list.create 1,2,3,4,5` - 创建包含初始值的顺序表
- `linear.linked_list.insert 3 at 2` - 在链表的第2个位置插入值3
- `linear.stack.push 10` - 将值10入栈

#### 3.3.2 树形结构DSL命令

```
tree.<structure_type>.<operation> [params]
```

例如：
- `tree.binary_tree.create 1,2,3,4,5` - 创建包含初始值的二叉树
- `tree.bst.insert 10` - 在BST中插入值10
- `tree.huffman_tree.encode "hello world"` - 使用哈夫曼树编码文本

## 4. 界面说明

### 4.1 主界面

主界面分为两个选项卡：
- **线性结构**：用于操作和可视化顺序表、链表和栈
- **树形结构**：用于操作和可视化二叉树、二叉搜索树和哈夫曼树

### 4.2 线性结构界面

线性结构界面包含以下部分：
- **数据结构类型**：选择要操作的线性结构类型
- **操作区域**：包含各种操作按钮和输入框
- **可视化区域**：展示当前数据结构的可视化表示

### 4.3 树形结构界面

树形结构界面包含以下部分：
- **数据结构类型**：选择要操作的树形结构类型（二叉树、二叉搜索树、哈夫曼树）
- **操作区域**：包含各种操作按钮和输入框
  - 不同树结构类型会显示不同的操作按钮
  - 二叉树：显示插入、删除、遍历按钮和遍历方式选择框
  - 二叉搜索树：显示插入、删除、搜索按钮
  - 哈夫曼树：显示编码、解码按钮
- **可视化区域**：展示当前树形结构的可视化表示
- **动画控制**：对于支持动画的操作（遍历、搜索、哈夫曼树构建），提供"上一步"和"下一步"按钮控制动画播放

## 5. 示例

### 5.1 创建并操作顺序表

1. 切换到"线性结构"选项卡
2. 在数据结构类型下拉框中选择"顺序表"
3. 在"值"输入框中输入"10,20,30,40,50"
4. 点击"新建"按钮，可视化区域将显示创建的顺序表
5. 在"值"输入框中输入"25"，在"位置"输入框中输入"2"
6. 点击"插入"按钮，可视化区域将更新，显示在位置2插入值25后的顺序表

### 5.2 创建并操作二叉搜索树

1. 切换到"树形结构"选项卡
2. 在数据结构类型下拉框中选择"二叉搜索树"
3. 在"值"输入框中输入"50,30,70,20,40,60,80"
4. 点击"新建"按钮，可视化区域将显示创建的二叉搜索树
5. 在"值"输入框中输入"35"
6. 点击"插入"按钮，可视化区域将更新，显示插入值35后的二叉搜索树
7. 选择"中序遍历"，点击"遍历"按钮，将显示中序遍历结果

### 5.3 使用DSL命令

1. 在主窗口底部的命令输入框中输入：`linear.stack.create 5,10,15,20`
2. 按下回车键，将创建一个包含初始值的栈
3. 输入命令：`linear.stack.push 25`
4. 按下回车键，将值25入栈
5. 输入命令：`linear.stack.pop`
6. 按下回车键，将执行出栈操作

## 6. 注意事项

- 输入多个值时，使用逗号分隔
- 位置索引从0开始
- 哈夫曼树的字符和频率数量必须一致
- DSL命令区分大小写