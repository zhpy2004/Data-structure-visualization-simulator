## 1. 数据结构设计

### 1.1 线性数据结构设计

项目实现了三种核心的线性数据结构：

**顺序表 (ArrayList)**
- 基于数组实现，采用动态扩容机制
- 核心属性：`capacity`（容量）、`size`（实际大小）、`data`（数据数组）
- 支持随机访问，时间复杂度O(1)
- 插入删除需要移动元素，时间复杂度O(n)

**链表 (LinkedList)**
- 基于节点的链式存储结构
- 节点类 `Node` 包含 `data`（数据）和 `next`（指向下一节点的指针）
- 动态内存分配，无需预分配空间
- 插入删除操作灵活，但访问需要遍历

**栈 (Stack)**
- 基于链表实现的后进先出(LIFO)数据结构
- 提供 `push`（入栈）、`pop`（出栈）、`peek`（查看栈顶）操作
- 支持栈的基本特性和异常处理

### 1.2 树形数据结构设计

**二叉树 (BinaryTree)**
- 节点类 `TreeNode` 包含 `data`、`left`、`right` 属性
- 支持多种遍历方式：前序、中序、后序、层序遍历
- 提供序列化和反序列化功能，便于数据持久化

**二叉搜索树 (BST)**
- 继承二叉树的基本结构
- 维护左子树 < 根节点 < 右子树的性质
- 支持高效的查找、插入、删除操作
- 平均时间复杂度O(log n)

**AVL树**
- 自平衡二叉搜索树
- 通过旋转操作维护树的平衡性
- 保证最坏情况下的时间复杂度为O(log n)

**哈夫曼树**
- 用于数据压缩的最优二叉树
- 支持编码和解码操作
- 实现了完整的哈夫曼编码算法

## 2. 程序结构原型

### 2.1 整体架构模式

项目采用经典的 **MVC (Model-View-Controller) 架构模式**：

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│     Model       │    │   Controller    │    │      View       │
│  数据结构模型    │◄───┤   业务逻辑控制   │───►│   用户界面视图   │
│                 │    │                 │    │                 │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

### 2.2 目录结构设计

```
Data-structure-visualization-simulator/
├── models/           # 模型层 - 数据结构实现
│   ├── linear/       # 线性结构
│   └── tree/         # 树形结构
├── views/            # 视图层 - UI界面
├── controllers/      # 控制器层 - 业务逻辑
├── utils/            # 工具层 - 辅助功能
│   ├── dsl_parser.py        # DSL解析器
│   └── visualization_helper.py  # 可视化辅助
└── main.py           # 程序入口
```

### 2.3 核心组件设计

**1. 应用控制器 (AppController)**
- 作为整个应用的协调中心
- 管理子控制器的生命周期
- 处理跨模块的信号传递
- 实现数据结构的保存和加载功能

**2. 专用控制器**
- linear_controller.py：处理线性结构操作
- tree_controller.py：处理树形结构操作
- dsl_controller.py：处理DSL命令解析和执行

**3. 视图组件**
- main_window.py：主窗口界面，采用选项卡设计
- linear_view.py：线性结构可视化视图
- tree_view.py：树形结构可视化视图

### 2.4 DSL (领域特定语言) 设计

项目实现了自定义的DSL，支持自然语言风格的数据结构操作：

**线性结构DSL示例：**
```
# 创建顺序表并初始化数据
create arraylist with 1,2,3,4,5    # 创建包含元素[1,2,3,4,5]的顺序表

# 在指定位置插入元素
insert 10 at 2 in arraylist        # 在索引2的位置插入元素10，结果：[1,2,10,3,4,5]

# 栈操作示例
push 20 to stack                   # 将元素20压入栈顶
pop from stack                     # 弹出栈顶元素

# 其他线性结构操作示例
create linkedlist with 1,3,5,7     # 创建包含元素[1,3,5,7]的链表
delete 3 from linkedlist           # 从链表中删除值为3的元素
get at 1 from arraylist            # 获取顺序表索引1位置的元素
clear stack                        # 清空栈中所有元素
```

**树形结构DSL示例：**
```
# 创建二叉搜索树并初始化数据
create bst with 5,3,7,1,9          # 创建包含节点[5,3,7,1,9]的二叉搜索树

# 插入新节点
insert 4 in bst                    # 在二叉搜索树中插入值为4的节点

# 树的遍历操作
traverse inorder                   # 中序遍历当前树（左-根-右）
traverse preorder                  # 前序遍历（根-左-右）
traverse postorder                 # 后序遍历（左-右-根）
traverse levelorder                # 层序遍历（按层从上到下，从左到右）

# 查找操作
search 7 in bst                    # 在二叉搜索树中查找值为7的节点

# 其他树操作示例
create binarytree with 1,2,3,4,5   # 创建普通二叉树
delete 3 from bst                  # 从二叉搜索树中删除值为3的节点
clear bst                          # 清空二叉搜索树

# 哈夫曼树操作示例
build huffman with a:5,b:3,c:2     # 根据字符频率构建哈夫曼树
encode "abc" using huffman         # 使用哈夫曼树编码字符串
decode 101010 using huffman        # 使用哈夫曼树解码二进制串
```

**DSL解析架构：**
- 使用Lark解析器库进行语法分析
- 定义了完整的语法规则和转换器
- 支持错误处理和语法验证

### 2.5 可视化设计

可视化辅助工具：visualization_helper.py

- 提供统一的绘图接口
- 定义了颜色、尺寸等视觉常量
- 支持节点高亮、动画效果等交互特性

**绘制功能：**
- 节点绘制：圆形节点，支持高亮显示
- 连接线绘制：箭头指示方向
- 标签绘制：显示索引或其他信息
- 空节点绘制：虚线表示空引用
        